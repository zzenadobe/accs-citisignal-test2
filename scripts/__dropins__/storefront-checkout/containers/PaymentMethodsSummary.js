/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,Fragment as f}from"@dropins/tools/preact-jsx-runtime.js";/* empty css                             */import"@dropins/tools/components.js";import"../chunks/TermsAndConditions.js";import{Slot as i}from"@dropins/tools/lib.js";/* empty css                      */import"../chunks/errors.js";import{events as P}from"@dropins/tools/event-bus.js";import{a as M}from"../chunks/events.js";import"@dropins/tools/preact-compat.js";import{c as l}from"../chunks/classes.js";/* empty css                  *//* empty css                       */import{useState as N,useCallback as S,useEffect as g}from"@dropins/tools/preact-hooks.js";import{S as k}from"../chunks/Summary.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"@dropins/tools/i18n.js";function u({node:e,...t}){return e?Array.isArray(e)?a(f,{children:e.map((m,r)=>a(u,{node:m,className:t.className,...t},r))}):(t.className=l([e.props.className,t.className]),a(e.type,{ref:e.ref,...e.props,...t},e.key)):null}const D=({className:e,details:t,heading:m,onEditClick:r,...s})=>a(k,{className:l([e,"checkout-payment-methods-summary"]),"data-testid":"checkout-payment-methods-summary",heading:m,onEditClick:r,...s,children:a(u,{className:"checkout-payment-methods-summary__details","data-testid":"checkout-payment-methods-summary-details",node:t})}),_=e=>e===null?!1:e.code!==""&&e.title!=="",b=({initialData:e={selectedPaymentMethod:null},onEditClick:t,slots:m})=>{const[r,s]=N(e),n=r.selectedPaymentMethod,y=S(()=>{t==null||t()},[t]);if(g(()=>{const o=P.on("checkout/updated",c=>{s(p=>({...p,selectedPaymentMethod:(c==null?void 0:c.selectedPaymentMethod)??null}))});return()=>{o==null||o.off()}},[]),!_(n))return null;const d=m!=null&&m.Heading?a(i,{name:"PaymentMethodsSummaryTitle",slot:m.Heading}):void 0,h=a(i,{context:{selectedPaymentMethod:n},name:"PaymentMethodsSummaryDetails",slot:m==null?void 0:m.Details,children:a("span",{className:"checkout-payment-methods-summary__label","data-testid":"checkout-payment-methods-summary-label",children:n.title})});return a(D,{details:h,heading:d,onEditClick:y})};b.getInitialData=async()=>{const e=M(),t=(e==null?void 0:e.selectedPaymentMethod)??null;return Promise.resolve({selectedPaymentMethod:t})};export{b as PaymentMethodsSummary,b as default};
