/*! Copyright 2025 Adobe
All Rights Reserved. */
import{S as M}from"./chunks/vcomponent.js";import{R as ee,V as re,c as te,g as oe}from"./chunks/vcomponent.js";import{d as E}from"./chunks/cjs.js";import{d as se,a as ie,i as le}from"./chunks/deviceUtils.js";import{C as ae,I as ue,i as ce}from"./chunks/initializer.js";import{x as R,A as O,h as _,T as V,E as D,q as f,_ as $,y as v}from"./chunks/icons/Add.js";import{IntlContext as k}from"./i18n.js";import{g as pe,s as fe}from"./chunks/image-params-keymap.js";import{g as he}from"./chunks/get-path-value.js";import"./preact-jsx-runtime.js";import"./signals.js";const A=r=>{const t=new FormData(r);return Object.fromEntries(t)},W=r=>{const t=new FormData(r),s=Object.fromEntries(t);return Object.entries(s).reduce((n,[d])=>{const u=r.elements[d];return u!=null&&u.validationMessage?{...n,[d]:u.validationMessage}:{...n}},{})},F={arrayMerge:(r,t,s)=>{const l=r.slice();return t.forEach((n,d)=>{typeof l[d]>"u"?l[d]=s.cloneUnlessOtherwiseSpecified(n,s):s.isMergeableObject(n)?l[d]=E(r[d],n,s):r.indexOf(n)===-1&&l.push(n)}),l}};function G(r,t){return t?E(r,t,F):r}const H=r=>r.replace("_","-");function q(r,t={},s,l,n,d="div"){const u=R(M),S=O(null),c=O("pending"),w=O([]),[y,P]=_({children:[l]}),[N,B]=_({}),C=V(()=>({get:o=>N[o],set:(o,e)=>{B({...C,[o]:e})}}),[N]),{intl:L}=R(k);t.dictionary=L.dictionary,t._setProps=o=>{P(e=>{const i=typeof o=="function"?o(e):o;if(n){const a=D(n(e),{key:"render"}),h=e.children.findIndex(p=>(p==null?void 0:p.key)==="render");e.children[h]=a}return i})};const g=f(o=>{typeof o=="function"?w.current.push(o):console.warn("Skipped: Invalid _registerMethod",o)},[]);t._registerMethod=g;const m=f(o=>$(d,{"data-slot-html-element":o.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(o)}},null),[d]);t._htmlElementToVNode=m,t.getSlotElement=f(o=>{var i,a;const e=(i=S.current)==null?void 0:i.querySelector(`[data-slot-key="${o}"]`);if(I(`ðŸŸ¦ "${r}" Slot getSlotElement: ${o}`,(a=S.current)==null?void 0:a.cloneNode(!0),e==null?void 0:e.cloneNode(!0)),!!e)return{appendChild:h=>{e.appendChild(h)},prependChild:h=>{e.insertBefore(h,e.firstChild)},appendSibling:h=>{const p=e.parentNode;p==null||p.insertBefore(h,e.nextSibling)},prependSibling:h=>{const p=e.parentNode;p==null||p.insertBefore(h,e)}}},[r]),t.onRender=f(o=>{w.current.push(o)},[]),t.onChange=t.onRender,t.replaceWith=f(o=>{g(e=>{const i=m(o);e._setProps({children:[i]})})},[m,g]),t.appendChild=f(o=>{g(e=>{const i=m(o);e._setProps(a=>({...a,children:[...a.children,i]}))})},[m,g]),t.prependChild=f(o=>{g(e=>{const i=m(o);e._setProps(a=>({...a,children:[i,...a.children]}))})},[m,g]),t.appendSibling=f(o=>{g(()=>{var i,a;const e=(i=S.current)==null?void 0:i.parentNode;e==null||e.insertBefore(o,((a=S.current)==null?void 0:a.nextSibling)??null)})},[g]),t.prependSibling=f(o=>{g(()=>{var i;const e=(i=S.current)==null?void 0:i.parentNode;e==null||e.insertBefore(o,S.current)})},[g]);const b=f(async()=>{if(c.current==="loading")return;c.current="loading",I(`ðŸŸ¨ "${r}" Slot Rendered`);const o=n?D(n(y),{key:"render"}):null;P({children:[o??l]}),w.current.forEach(e=>{e(t,C)}),c.current="ready"},[l,t,r,y,n,C]),j=f(async()=>{if(s)try{c.current="loading",I(`ðŸŸ© "${r}" Slot Initialized`),await s(t,S.current)}catch(o){console.error(`Error in "${s.name}" Slot callback`,o)}finally{c.current="ready",await b()}},[s,t,b,r]);return v(()=>{j().finally(()=>{u&&(u.value.delete(r),u.value=new Set(u.value))})},[]),v(()=>{b()},[JSON.stringify(t),JSON.stringify(N)]),[S,y]}function X({name:r,context:t,slot:s,children:l,render:n,slotTag:d="div",contentTag:u="div",...S}){const c=R(M),[w,y]=q(r,t,s,l,n,u);return V(()=>{if(!r)return console.warn('Slot "name" is required');c&&(c.value.add(r),c.value=new Set(c.value))},[r,c]),$(d,{...S,ref:w,"data-slot":r},y.children)}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--show-slots",r.toString()),document.body.classList.toggle("dropin-debugger--show-slots",r)};let I=()=>{};window.DROPINS.logSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--log-slots",r.toString()),I=r?(...t)=>console.log(...t):()=>{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");window.DROPINS.logSlots(window.sessionStorage.getItem("dropin-debugger--log-slots")==="true");function Y(r){const t=document.cookie.split(";");let s;return t.forEach(l=>{const[n,d]=l.trim().split("=");n===r&&(s=decodeURIComponent(d))}),s}export{ae as Config,ue as Initializer,ee as Render,X as Slot,M as SlotQueueContext,re as VComponent,te as classes,se as debounce,E as deepmerge,oe as generateSrcset,Y as getCookie,W as getFormErrors,A as getFormValues,pe as getImageParamsKeyMap,he as getPathValue,ce as initializers,ie as isIOSMobileDevice,le as isNumber,G as merge,fe as setImageParamsKeyMap,H as toLanguageTag,q as useSlot};
//# sourceMappingURL=lib.js.map
